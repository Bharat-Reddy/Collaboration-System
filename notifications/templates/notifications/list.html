{% extends 'base.html' %}

{% block content %}

<ul class="notifications">

<div class="row">
  <div class="col-sm-6 alert alert-success" style="background:white !important;">
    <a href="{% url 'notifications:mark_all_as_read' %}">Mark All as Read</a>
  </div>
    <div class="col-sm-6 text-right alert alert-success" style="background:white !important;">
    <a href="{% url 'notifications:mark_all_as_unread' %}">Mark All as Unread</a>
  </div>
</div>

  {% load notifications_tags %}

  {% for notice in notifications %}
  <div class="row">
    <div class="col-sm-12 col-sm-8 col-sm-offset-2">

                         <div class="alert alert-block alert-{{ notice.level }}" style=" margin:1px !important;" >

                           <div class="row" style="padding-left:5px; padding-right:5px;">
                          <h4 class="col-md-10 text-left">
                            <i class="icon-mail{% if notice.unread %}-alt{% endif %}"></i>
                            {{ notice.actor }} :
                            {{ notice.verb }} <a class="alert-link" href="{% url 'notifications:mark_as_read_and_redirect' notice.slug %}">{{ notice.target }} {{ notice.target_content_type }} </a>
                              <!-- url notice.description notice.target_object_id -->
                          </h4>

                            {% if notice.unread %}
                                <p class="text-right col-md-2"><a class="alert-link" href="{% url 'notifications:mark_as_read' notice.slug %}"><span class="glyphicon glyphicon-unchecked"></span></a> Unread</p>
                            {% else %}
                                <p class="text-right col-md-2"><a class="alert-link" href="{% url 'notifications:mark_as_unread' notice.slug %}"><span class="glyphicon glyphicon-check"></span></a>  Read</p>
                            {% endif %}
                           </div>

                             <div class="row" style="padding-left:5px; padding-right:5px;">
                          <p class="col-md-6">{{ notice.timesince }} ago</p>
                                 <p class="col-md-6 text-right"><button class="alert-btn" style="border:0px solid transparent; background:transparent;" data-toggle="modal" data-target="#modal1"><span class="glyphicon glyphicon-trash"></span></button>Delete</p>
                                     <div class="modal fade" id="modal1">
                                        <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header"><button class="close" data-dismiss="modal">&times;</button><h4>Delete</h4></div>
                                            <div class="modal-body">
                                                <form method = "post" action ="{% url 'notifications:delete' notice.slug %}">
                                                    {% csrf_token %}
                                                    Are you sure you want to delete this notification?
                                              </div>
                                              <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                                                <button type="submit" class="btn btn-primary">Yes</button>
                                                </form>
                                              </div>
                                        </div>
                                        </div>
                                    </div>




                             </div>
                          <!-- <p>{{ notice.description|linebreaksbr }}</p> -->

                          <div class="notice-actions">
                            {% for action in notice.data.actions %}
                              <a class="btn" href="{{ action.href }}">{{ action.title }}</a>
                            {% endfor %}
                          </div>
                        </div>
    </div>
  </div>
  {% endfor %}

    {% if is_paginated %}
  <ul class="pagination pull-right">
    {% if page_obj.has_previous %}
      <li><a href="?page={{ page_obj.previous_page_number }}">&laquo;</a></li>
    {% else %}
      <li class="disabled"><span>&laquo;</span></li>
    {% endif %}
    {% for i in paginator.page_range %}
      {% if page_obj.number == i %}
        <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>
      {% else %}
        <li><a href="?page={{ i }}">{{ i }}</a></li>
      {% endif %}
    {% endfor %}
    {% if page_obj.has_next %}
      <li><a href="?page={{ page_obj.next_page_number }}">&raquo;</a></li>
    {% else %}
      <li class="disabled"><span>&raquo;</span></li>
    {% endif %}
  </ul>
{% endif %}

</ul>
{% endblock %}